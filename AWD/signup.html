<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sign Up</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome CDN -->
    <script src="https://kit.fontawesome.com/419ec3d632.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="bootstrap-5.3.3-dist\css\bootstrap.css">
    <link rel="stylesheet" href="styles.css">
    <style>
      body {
        background-image: url("https://lh3.googleusercontent.com/Hxrm0FEgRutcRL2mhNnpHdwDLPjlXnGMotdtlzRxwtLXK2hDbhgmA_gDFRkpeYJvrC5xrkB52NM4RQrloB-Ob7IgKTpFzciYkjwTnc36HEu_XSM=rw-e365-w1440");
        background-size: cover; /* Ensures the image covers the entire screen */
        background-position: center; /* Centers the image */
        background-repeat: no-repeat; /* Prevents tiling */
        background-attachment: fixed; /* Keeps the image fixed on scroll */
      }
    </style>
  </head>
  <body class="min-h-screen flex flex-row items-center">
    
    <!-- Headers -->
    <header>
      <nav class="navbar navbar-expand-lg container pb-5">
        <div class="container-fluid d-flex justify-content-between align-items-center">
            <a href="pookiebearawd.github.io/AWD/index.html" class="navbar-brand text-white">
                <img src="assets/Pokémon_GO_logo.svg" alt="Pokémon GO" height="70">
            </a>
            <div class="search-container col-5 d-flex w-50 bg-white rounded-pill p-1 ">
                <button class="btn button-prs rounded-pill w-30 flex-shrink-0">Redeem Code</button>
                <input type="text" class="form-control border-0 me-3 rounded-pill" placeholder="Enter Code">
                
            </div>
            <a class="btn btn-warning ms-3" href="pookiebearawd.github.io/AWD/cartpage.html">Shop Now</a></div>
            <div class="d-flex align-items-center ">
                <a href="#" class="text-white me-3 d-flex"><i class="fas fa-user pt-1 pe-2"></i> Account</a>
                <a href="#" class="text-white d-flex position-relative" data-bs-toggle="modal" data-bs-target="#cartModal">
                    <i class="fas fa-shopping-bag pt-1 pe-2"></i> Shopping
                    <span class="badge bg-danger rounded-circle badge-notification ">1</span>
                </a>
            </div>
        </div>
    </nav>
    </header>
        <!-- Headers -->
    <div class="max-w-xl w-full mx-auto p-6">
      <img
        src="https://lh3.googleusercontent.com/3TSaKxXGo2wT0lu0AyNUBnkk6wkCC2AzOhJyy3JXIPm-AmZ1k9DSAroWeBUyePswCZSs5lVp3mPF7HzUpY9VPlyOV5eddITONINr3WSqLNLm=e365-w1860"
        alt=""
      />
    </div>
    <div class="max-w-xl w-full mx-auto p-6">
      <div class="bg-white shadow-xl rounded-lg p-8">
        <h2 class="text-3xl font-extrabold text-center text-gray-800 mb-8">
          Sign Up
        </h2>
        <form id="signupForm" novalidate>
          <!-- Email Field -->
          <div class="mb-6">
            <label for="email" class="block text-gray-700 font-semibold mb-2"
              >Email Address</label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
              required
            />
            <div class="text-red-500 text-sm mt-1 hidden" id="emailError">
              Please enter a valid email.
            </div>
          </div>

          <!-- Password Field with Toggle -->
          <div class="mb-6 relative">
            <label for="password" class="block text-gray-700 font-semibold mb-2"
              >Password</label
            >
            <div class="flex gap-3">
              <input
                type="password"
                id="password"
                name="password"
                class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                required
              />
              <button
                type="button"
                class="w-24 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg py-3 focus:outline-none toggle-btn"
                data-target="password"
              >
                <i class="fa-solid fa-eye"></i>
              </button>
            </div>
            <div class="text-red-500 text-sm mt-1 hidden" id="passwordError">
              Please enter a password.
            </div>
            <!-- Password strength text -->
            <div
              id="passwordStrength"
              class="mt-3 text-sm font-medium hidden"
            ></div>
            <!-- Password strength bar -->
            <div
              id="passwordStrengthBar"
              class="w-full h-2 bg-gray-300 rounded-full mt-1 hidden"
            >
              <div
                id="passwordStrengthFill"
                class="h-full transition-all duration-500"
                style="width: 0%"
              ></div>
            </div>
            <!-- Password criteria list -->
            <ul
              id="passwordCriteria"
              class="mt-2 ml-6 text-sm list-disc hidden"
            >
              <li id="criteria-length" class="text-red-500">
                At least 8 characters
              </li>
              <li id="criteria-uppercase" class="text-red-500">
                At least one uppercase letter
              </li>
              <li id="criteria-lowercase" class="text-red-500">
                At least one lowercase letter
              </li>
              <li id="criteria-number" class="text-red-500">
                At least one number
              </li>
              <li id="criteria-special" class="text-red-500">
                At least one special character
              </li>
            </ul>
          </div>

          <!-- Confirm Password Field with Toggle -->
          <div class="mb-6 relative">
            <label
              for="confirmPassword"
              class="block text-gray-700 font-semibold mb-2"
              >Confirm Password</label
            >
            <div class="flex gap-3">
              <input
                type="password"
                id="confirmPassword"
                name="confirmPassword"
                class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                required
              />
              <button
                type="button"
                class="w-24 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg py-3 focus:outline-none toggle-btn"
                data-target="confirmPassword"
              >
                <i class="fa-solid fa-eye"></i>
              </button>
            </div>
            <div
              class="text-red-500 text-sm mt-1 hidden"
              id="confirmPasswordError"
            >
              Passwords do not match.
            </div>
          </div>

          <!-- IGN and Confirm IGN Button -->
          <div class="mb-6">
            <label for="ign" class="block text-gray-700 font-semibold mb-2"
              >In-game Name (IGN)</label
            >
            <div class="flex gap-3">
              <input
                type="text"
                id="ign"
                name="ign"
                class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                required
              />
              <button
                type="button"
                id="confirmIGN"
                class="w-24 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg py-3"
              >
                Verify
              </button>
            </div>
            <div class="text-red-500 text-sm mt-1 hidden" id="ignError">
              Please enter your in-game name.
            </div>
          </div>

          <!-- In-game Player ID Field (always visible) -->
          <div class="mb-6">
            <label for="playerID" class="block text-gray-700 font-semibold mb-2"
              >In-game Player ID</label
            >
            <input
              type="text"
              id="playerID"
              name="playerID"
              class="w-full border border-gray-300 rounded-lg px-4 py-3 text-gray-400"
              value="XXXX XXXX XXXX"
              readonly
            />
          </div>

          <button
            type="submit"
            id="signupBtn"
            class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg disabled:bg-gray-400"
            disabled
          >
            Sign Up
          </button>
        </form>
      </div>
    </div>

    <script>
      // Global flag to track if IGN has been confirmed
      let ignConfirmed = false;

      // Toggle show/hide for password fields using FontAwesome icons
      document.querySelectorAll(".toggle-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          const targetId = this.getAttribute("data-target");
          const input = document.getElementById(targetId);
          if (input.type === "password") {
            input.type = "text";
            this.innerHTML = '<i class="fa-solid fa-eye-slash"></i>';
          } else {
            input.type = "password";
            this.innerHTML = '<i class="fa-solid fa-eye"></i>';
          }
        });
      });

      // Email validation on blur
      const emailInput = document.getElementById("email");
      emailInput.addEventListener("blur", function () {
        const emailError = document.getElementById("emailError");
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(emailInput.value.trim())) {
          emailError.classList.remove("hidden");
        } else {
          emailError.classList.add("hidden");
        }
        checkFormValidity();
      });

      // Password strength evaluation and criteria
      const passwordInput = document.getElementById("password");
      const passwordStrengthText = document.getElementById("passwordStrength");
      const passwordStrengthBar = document.getElementById(
        "passwordStrengthBar"
      );
      const passwordStrengthFill = document.getElementById(
        "passwordStrengthFill"
      );
      const criteriaLength = document.getElementById("criteria-length");
      const criteriaUppercase = document.getElementById("criteria-uppercase");
      const criteriaLowercase = document.getElementById("criteria-lowercase");
      const criteriaNumber = document.getElementById("criteria-number");
      const criteriaSpecial = document.getElementById("criteria-special");
      const passwordCriteria = document.getElementById("passwordCriteria");

      passwordInput.addEventListener("input", function () {
        const password = passwordInput.value;

        // Toggle visibility based on password content
        if (password) {
          passwordStrengthText.classList.remove("hidden");
          passwordStrengthBar.classList.remove("hidden");
          passwordCriteria.classList.remove("hidden");
        } else {
          passwordStrengthText.classList.add("hidden");
          passwordStrengthBar.classList.add("hidden");
          passwordCriteria.classList.add("hidden");
        }

        let strength = 0;

        if (password.length >= 8) {
          criteriaLength.classList.replace("text-red-500", "text-green-500");
          strength++;
        } else {
          criteriaLength.classList.replace("text-green-500", "text-red-500");
        }

        if (/[A-Z]/.test(password)) {
          criteriaUppercase.classList.replace("text-red-500", "text-green-500");
          strength++;
        } else {
          criteriaUppercase.classList.replace("text-green-500", "text-red-500");
        }

        if (/[a-z]/.test(password)) {
          criteriaLowercase.classList.replace("text-red-500", "text-green-500");
          strength++;
        } else {
          criteriaLowercase.classList.replace("text-green-500", "text-red-500");
        }

        if (/[0-9]/.test(password)) {
          criteriaNumber.classList.replace("text-red-500", "text-green-500");
          strength++;
        } else {
          criteriaNumber.classList.replace("text-green-500", "text-red-500");
        }

        if (/[\W_]/.test(password)) {
          criteriaSpecial.classList.replace("text-red-500", "text-green-500");
          strength++;
        } else {
          criteriaSpecial.classList.replace("text-green-500", "text-red-500");
        }

        // Update strength text and bar with smooth animation
        let strengthLabel = "";
        if (strength <= 2) {
          strengthLabel = "Weak";
          passwordStrengthFill.classList.remove(
            "bg-yellow-500",
            "bg-green-500"
          );
          passwordStrengthFill.classList.add("bg-red-500");
        } else if (strength === 3 || strength === 4) {
          strengthLabel = "Moderate";
          passwordStrengthFill.classList.remove("bg-red-500", "bg-green-500");
          passwordStrengthFill.classList.add("bg-yellow-500");
        } else if (strength === 5) {
          strengthLabel = "Strong";
          passwordStrengthFill.classList.remove("bg-red-500", "bg-yellow-500");
          passwordStrengthFill.classList.add("bg-green-500");
        }
        passwordStrengthText.textContent = password
          ? `Strength: ${strengthLabel}`
          : "";

        // Set the fill width as a percentage of strength out of 5
        passwordStrengthFill.style.width = strength * 20 + "%";

        checkFormValidity();
      });

      // Confirm password validation on blur
      const confirmPasswordInput = document.getElementById("confirmPassword");
      confirmPasswordInput.addEventListener("blur", function () {
        const confirmError = document.getElementById("confirmPasswordError");
        if (passwordInput.value !== confirmPasswordInput.value) {
          confirmError.classList.remove("hidden");
        } else {
          confirmError.classList.add("hidden");
        }
        checkFormValidity();
      });

      // A hash function to compute a numeric hash from a string (using djb2 algorithm)
      function hashString(str) {
        let hash = 5381;
        for (let i = 0; i < str.length; i++) {
          hash = (hash << 5) + hash + str.charCodeAt(i);
        }
        return Math.abs(hash);
      }

      // Generate a 12-digit in-game player ID from the IGN
      function generatePlayerIDFromIGN(ign) {
        const hash = hashString(ign);
        const number = hash % 1000000000000;
        const numberString = String(number).padStart(12, "0");
        return (
          numberString.slice(0, 4) +
          " " +
          numberString.slice(4, 8) +
          " " +
          numberString.slice(8, 12)
        );
      }

      // IGN confirmation to generate player ID
      const ignInput = document.getElementById("ign");
      document
        .getElementById("confirmIGN")
        .addEventListener("click", function () {
          const ignError = document.getElementById("ignError");
          const ignValue = ignInput.value.trim();
          const playerIDInput = document.getElementById("playerID");

          ignError.classList.add("hidden");
          if (ignValue === "") {
            ignError.textContent = "Please enter your in-game name.";
            ignError.classList.remove("hidden");
            ignConfirmed = false;
            playerIDInput.value = "XXXX XXXX XXXX";
            playerIDInput.classList.add("text-gray-400");
          } else {
            playerIDInput.value = generatePlayerIDFromIGN(ignValue);
            playerIDInput.classList.remove("text-gray-400");
            playerIDInput.classList.add("text-black");
            ignConfirmed = true;
          }
          checkFormValidity();
        });

      // If user edits the IGN after confirmation, mark as unconfirmed and reset the player ID field
      ignInput.addEventListener("input", function () {
        ignConfirmed = false;
        const playerIDInput = document.getElementById("playerID");
        playerIDInput.value = "XXXX XXXX XXXX";
        playerIDInput.classList.remove("text-black");
        playerIDInput.classList.add("text-gray-400");
        checkFormValidity();
      });

      // Function to check if all conditions are met and enable the Sign Up button
      function checkFormValidity() {
        const emailValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(
          emailInput.value.trim()
        );
        const passwordVal = passwordInput.value;
        const passwordValid =
          passwordVal.length >= 8 &&
          /[A-Z]/.test(passwordVal) &&
          /[a-z]/.test(passwordVal) &&
          /[0-9]/.test(passwordVal) &&
          /[\W_]/.test(passwordVal);
        const confirmPasswordValid = passwordVal === confirmPasswordInput.value;
        const ignValid = ignInput.value.trim() !== "" && ignConfirmed;

        const allValid =
          emailValid && passwordValid && confirmPasswordValid && ignValid;
        document.getElementById("signupBtn").disabled = !allValid;
      }

      // Re-check validity on input events
      emailInput.addEventListener("input", checkFormValidity);
      passwordInput.addEventListener("input", checkFormValidity);
      confirmPasswordInput.addEventListener("input", checkFormValidity);
    </script>
  </body>
</html>
